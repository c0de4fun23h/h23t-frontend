document.addEventListener("DOMContentLoaded",(function(){for(var e=document.querySelectorAll(".popup"),t=0;t<e.length;t++)e[t].addEventListener("click",(function(e){e.preventDefault();var t=this.getAttribute("href");return this.removeAttribute("target"),window.open(t,"newwindow","width=500,height=360"),!1}));var i=document.querySelectorAll(".trigger"),l=0;for(t=0;t<i.length;t++)i[t].addEventListener("click",(function(e){if(e.target.classList.contains("trigger-once")){if(l>0)return;l+=1}var t,i=document.getElementById(this.getAttribute("rel"));return(t=i).classList.add("active"),document.body.classList.add("with-overlay"),trackViewPage(t),!1}));var n=document.querySelectorAll(".overlay");for(t=0;t<n.length;t++)n[t].addEventListener("click",(function(e){(e.target.classList.contains("close")||e.target.parentNode.classList.contains("close"))&&(this.classList.remove("active"),document.body.classList.remove("with-overlay"))}));document.onkeydown=function(e){if(27==(e=e||window.event).keyCode){for(var t=document.querySelectorAll(".overlay"),i=0;i<t.length;i++)t[i].classList.remove("active");document.body.classList.remove("with-overlay")}}})),$((function(){function e(e){e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px"}function t(t){window.setTimeout(e,0,t)}for(var i=document.querySelectorAll(".autosize"),l=0,n=i.length;l<n;++l){var a=i.item(l);a.addEventListener("change",e,!1),a.addEventListener("cut",t,!1),a.addEventListener("paste",t,!1),a.addEventListener("drop",t,!1),a.addEventListener("keydown",t,!1)}$("#header .toggle").click((function(){$(this).next(".menu").toggleClass("active")})),$("#header .close").click((function(){$(this).parent().parent().toggleClass("active")})),$(".filters a").click((function(e,t=!0){var i=$(this).parent().attr("data-target");$(".filters a").removeClass("active"),$(this).addClass("active");var l=$(this).attr("data-filter");$("#"+i+" li").removeClass("hidden"),"all"!=l&&$("#"+i+" li").filter((function(){return!($(this).attr("data-filters").indexOf(l)>-1)})).addClass("hidden"),s(),t&&window.history.pushState({urlPath:window.location.pathname},"","?filter="+l)}));var o=new RegExp("[?&]filter=([^&#]*)").exec(window.location.href);function s(e=10){$(".list.collapsible li:not(.hidden)").length>e?$(".list.collapsible").addClass("collapsed"):$(".list.collapsible").removeClass("collapsed"),$(".list.collapsible li:not(.hidden)").removeClass("collapsed").slice(e).addClass("collapsed"),$(".list.collapsible + .toggle").click((function(){$(this).prev(".collapsible").removeClass("collapsed")}))}o&&o[1]&&$(".filters a[data-filter="+o[1]+"]").trigger("click",!1),s()})),$("#chineseno").click((function(){$("#notice").removeClass("hidden"),$("#noticecheckbox").removeAttr("checked")})),$("#chineseyes").click((function(){$("#notice").addClass("hidden"),$("#noticecheckbox").attr("checked",!0)}));